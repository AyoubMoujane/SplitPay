@startuml make_payment

package controller <<Folder>> {
  class moneyInputController {
    +sendMoney()
  }
  class splitController {
    +paySplit()
  }
}

package facade <<Folder>> {
  class TransactionFacade {
    +getInstance() : TransactionFacade
    +sendMoney(int sender, int receiver, Float amount)
    +paySplit(int sender, int receiver, Float amount)
  }

  class SplitFacade {
      +getInstance() : SplitFacade
      +paySplit(int id)
    }

  SplitFacade ..> TransactionFacade : uses >
}


package dao <<Folder>> {
  class DAOFactory {
    #{static}connection : Connection
    +createTransactionDao() : TransactionDao
    +{static}getConnection() : Connection
  }

  package mysql <<Folder>> {
    class MySqlDAOFactory {}
    class MySqlTransactionDAO {}
    class MySqlSplitDAO {}
    MySqlDAOFactory .down.> MySqlTransactionDAO : creates
    MySqlDAOFactory .down.> MySqlSplitDAO : creates
  }

  class TransactionDAO {
    +getConnection() : Connection
    +createUserToUserTransaction(int sender, int receiver, Float amount)
    +createSplitTransaction(int sender, int receiver, Float amount)
  }

  class SplitDAO {
      +getConnection() : Connection
      +paySplit(int id) : void
    }

  DAOFactory <|-- MySqlDAOFactory
  TransactionDAO <|-- MySqlTransactionDAO
  SplitDAO <|-- MySqlSplitDAO


}

moneyInputController .down.> TransactionFacade
splitController .down.> SplitFacade

TransactionFacade -down-> DAOFactory
TransactionFacade --> TransactionDAO

SplitFacade -down-> DAOFactory
SplitFacade --> SplitDAO

@enduml